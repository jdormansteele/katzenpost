Mon Jun 17 08:56:01 PM CEST 2024
starting new test
=================
=== RUN   TestUpgradeResume_2
=== PAUSE TestUpgradeResume_2
=== CONT  TestUpgradeResume_2
18:59:23.571 NOTI katzenpost/client: ðŸ˜¼ Katzenpost is still pre-alpha.  DO NOT DEPEND ON IT FOR STRONG SECURITY OR ANONYMITY. ðŸ˜¼
18:59:23.768 NOTI pki/voting/Client: Get(ctx, 1853129)
18:59:23.795 NOTI pki/voting/client/connector: sending getConsensus to auth3
18:59:24.114 NOTI pki/voting/client/connector: got response from auth3 to GetConsensus(1853129) (attempt 0, err=<nil>, res=Ok)
18:59:24.251 NOTI pki/voting/Client: OK, received fully signed consensus document.
18:59:24.447 NOTI pki/voting/Client: voting/Client: Get() document:
&{Epoch: 1853129 GenesisEpoch: 1853128
SendRatePerMinute: 100 Mu: 0.005 MuMaxDelay: 1000 LambdaP:0.001 LambdaPMaxDelay:1000 LambdaL:0.0005 LambdaLMaxDelay:1000 LambdaD:0.0005 LambdaDMaxDelay:3000 LambdaM: 0.0005 LambdaMMaxDelay: 100
SharedRandomValue: vf1SGAv7BdUIimw/8HZxEvxjTyoWCsKTRiK5ipqvu6w= PriorSharedRandom: [PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=, PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=]
Topology:
  [0]{[{mix1 4360877db9495add3b6da1f4cf5a1c31f87574ac1a857fb67e9d160d65ac80fe map[tcp4:[127.0.0.1:30006]]}]}
  [1]{[{mix2 ac353d491546ed96705fa0b521ab13a9ef9d74cde2daa847c7769138f61b7f4e map[tcp4:[127.0.0.1:30007]]}]}
  [2]{[{mix3 f7d45fba1b53e6609693b4356ab3905411f883329f5fb64bac6dfd894f27c834 map[tcp4:[127.0.0.1:30008]]}]}
}
Providers:[]{[{servicenode1 a5f31a4ca3e467117f3e2a6dcf06e34b1fc03e92e5fc5b58212e5acd3a86b73e map[tcp:[localhost:30004] tcp4:[127.0.0.1:30004]]map[echo:map[endpoint:+echo] panda:map[endpoint:+panda] spool:map[endpoint:+spool]]oob} {servicenode2 af7fbf8d21fca2060bb5722343fae6dda68388a8eeda11edf52ed96d44fc7776 map[tcp:[localhost:30005] tcp4:[127.0.0.1:30005]]map[echo:map[endpoint:+echo]]tofu}]}}}
18:59:24.448 NOTI minclient:76ecb0fa56fbafd03d3ae527b76fe58510aa9300a608908d1c939aec977cf22f@servicenode2: Katzenpost is still pre-alpha.  DO NOT DEPEND ON IT FOR STRONG SECURITY OR ANONYMITY.
18:59:24.449 NOTI pki/voting/Client: Get(ctx, 1853130)
18:59:24.479 NOTI pki/voting/client/connector: sending getConsensus to auth1
18:59:24.882 NOTI pki/voting/client/connector: got response from auth1 to GetConsensus(1853130) (attempt 0, err=<nil>, res=Ok)
18:59:25.012 NOTI pki/voting/Client: OK, received fully signed consensus document.
18:59:25.205 NOTI pki/voting/Client: voting/Client: Get() document:
&{Epoch: 1853130 GenesisEpoch: 1853128
SendRatePerMinute: 100 Mu: 0.005 MuMaxDelay: 1000 LambdaP:0.001 LambdaPMaxDelay:1000 LambdaL:0.0005 LambdaLMaxDelay:1000 LambdaD:0.0005 LambdaDMaxDelay:3000 LambdaM: 0.0005 LambdaMMaxDelay: 100
SharedRandomValue: tARqY+DRYzuYEZOK4F0gLsMLuO4tDoXexppNj/ChAJg= PriorSharedRandom: [PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=, PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=]
Topology:
  [0]{[{mix1 4360877db9495add3b6da1f4cf5a1c31f87574ac1a857fb67e9d160d65ac80fe map[tcp4:[127.0.0.1:30006]]}]}
  [1]{[{mix2 ac353d491546ed96705fa0b521ab13a9ef9d74cde2daa847c7769138f61b7f4e map[tcp4:[127.0.0.1:30007]]}]}
  [2]{[{mix3 f7d45fba1b53e6609693b4356ab3905411f883329f5fb64bac6dfd894f27c834 map[tcp4:[127.0.0.1:30008]]}]}
}
Providers:[]{[{servicenode1 a5f31a4ca3e467117f3e2a6dcf06e34b1fc03e92e5fc5b58212e5acd3a86b73e map[tcp:[localhost:30004] tcp4:[127.0.0.1:30004]]map[echo:map[endpoint:+echo] panda:map[endpoint:+panda] spool:map[endpoint:+spool]]oob} {servicenode2 af7fbf8d21fca2060bb5722343fae6dda68388a8eeda11edf52ed96d44fc7776 map[tcp:[localhost:30005] tcp4:[127.0.0.1:30005]]map[echo:map[endpoint:+echo]]tofu}]}}}
18:59:25.207 INFO catshadow: Connection status change: isConnected true
18:59:25.716 NOTI katzenpost/client: ðŸ˜¼ Katzenpost is still pre-alpha.  DO NOT DEPEND ON IT FOR STRONG SECURITY OR ANONYMITY. ðŸ˜¼
18:59:25.825 NOTI pki/voting/Client: Get(ctx, 1853129)
18:59:25.852 NOTI pki/voting/client/connector: sending getConsensus to auth1
18:59:26.387 NOTI pki/voting/client/connector: got response from auth1 to GetConsensus(1853129) (attempt 0, err=<nil>, res=Ok)
18:59:26.542 NOTI pki/voting/Client: OK, received fully signed consensus document.
18:59:26.827 NOTI pki/voting/Client: voting/Client: Get() document:
&{Epoch: 1853129 GenesisEpoch: 1853128
SendRatePerMinute: 100 Mu: 0.005 MuMaxDelay: 1000 LambdaP:0.001 LambdaPMaxDelay:1000 LambdaL:0.0005 LambdaLMaxDelay:1000 LambdaD:0.0005 LambdaDMaxDelay:3000 LambdaM: 0.0005 LambdaMMaxDelay: 100
SharedRandomValue: vf1SGAv7BdUIimw/8HZxEvxjTyoWCsKTRiK5ipqvu6w= PriorSharedRandom: [PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=, PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=]
Topology:
  [0]{[{mix1 4360877db9495add3b6da1f4cf5a1c31f87574ac1a857fb67e9d160d65ac80fe map[tcp4:[127.0.0.1:30006]]}]}
  [1]{[{mix2 ac353d491546ed96705fa0b521ab13a9ef9d74cde2daa847c7769138f61b7f4e map[tcp4:[127.0.0.1:30007]]}]}
  [2]{[{mix3 f7d45fba1b53e6609693b4356ab3905411f883329f5fb64bac6dfd894f27c834 map[tcp4:[127.0.0.1:30008]]}]}
}
Providers:[]{[{servicenode1 a5f31a4ca3e467117f3e2a6dcf06e34b1fc03e92e5fc5b58212e5acd3a86b73e map[tcp:[localhost:30004] tcp4:[127.0.0.1:30004]]map[echo:map[endpoint:+echo] panda:map[endpoint:+panda] spool:map[endpoint:+spool]]oob} {servicenode2 af7fbf8d21fca2060bb5722343fae6dda68388a8eeda11edf52ed96d44fc7776 map[tcp:[localhost:30005] tcp4:[127.0.0.1:30005]]map[echo:map[endpoint:+echo]]tofu}]}}}
18:59:26.828 NOTI minclient:84abfcd16367616f5e3c5327c2d17ae6f7a51e71a34dc90a8d1d767df1f2aec6@servicenode2: Katzenpost is still pre-alpha.  DO NOT DEPEND ON IT FOR STRONG SECURITY OR ANONYMITY.
18:59:26.829 NOTI pki/voting/Client: Get(ctx, 1853130)
18:59:26.858 NOTI pki/voting/client/connector: sending getConsensus to auth3
18:59:27.192 NOTI pki/voting/client/connector: got response from auth3 to GetConsensus(1853130) (attempt 0, err=<nil>, res=Ok)
18:59:27.355 NOTI pki/voting/Client: OK, received fully signed consensus document.
18:59:27.543 NOTI pki/voting/Client: voting/Client: Get() document:
&{Epoch: 1853130 GenesisEpoch: 1853128
SendRatePerMinute: 100 Mu: 0.005 MuMaxDelay: 1000 LambdaP:0.001 LambdaPMaxDelay:1000 LambdaL:0.0005 LambdaLMaxDelay:1000 LambdaD:0.0005 LambdaDMaxDelay:3000 LambdaM: 0.0005 LambdaMMaxDelay: 100
SharedRandomValue: tARqY+DRYzuYEZOK4F0gLsMLuO4tDoXexppNj/ChAJg= PriorSharedRandom: [PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=, PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=]
Topology:
  [0]{[{mix1 4360877db9495add3b6da1f4cf5a1c31f87574ac1a857fb67e9d160d65ac80fe map[tcp4:[127.0.0.1:30006]]}]}
  [1]{[{mix2 ac353d491546ed96705fa0b521ab13a9ef9d74cde2daa847c7769138f61b7f4e map[tcp4:[127.0.0.1:30007]]}]}
  [2]{[{mix3 f7d45fba1b53e6609693b4356ab3905411f883329f5fb64bac6dfd894f27c834 map[tcp4:[127.0.0.1:30008]]}]}
}
Providers:[]{[{servicenode1 a5f31a4ca3e467117f3e2a6dcf06e34b1fc03e92e5fc5b58212e5acd3a86b73e map[tcp:[localhost:30004] tcp4:[127.0.0.1:30004]]map[echo:map[endpoint:+echo] panda:map[endpoint:+panda] spool:map[endpoint:+spool]]oob} {servicenode2 af7fbf8d21fca2060bb5722343fae6dda68388a8eeda11edf52ed96d44fc7776 map[tcp:[localhost:30005] tcp4:[127.0.0.1:30005]]map[echo:map[endpoint:+echo]]tofu}]}}}
18:59:27.544 INFO catshadow: Connection status change: isConnected true
18:59:27.544 INFO catshadow: Test 2 waiting for message 'message 2 from bob' from bob on 8732560e23771c40325591ce
18:59:31.137 INFO catshadow: XXX decrypting from bob
18:59:31.143 INFO catshadow: Test 2 received message 'message 2 from bob' from bob
18:59:31.143 INFO catshadow: Test 2 Sending message 'message 2 from alice' to bob on 500e91ae664ea9cbf928bfa1
XXX writing sendRatchetPublic to header: ce22c028a7bf6e611e4be2f90b5f8faf7344e3a0e4826bc6b1561d5e580ded15
XXX writing sendPQRatchetPublicBytes to header: 0ae391bb797fd54df3f842ef9412870e367348764c7ea2fc67692fedf936e7bfbd5ff835f8164c8f679588281d44083c31fcd1ffcf717d915d985f3c0d541d3b at offset 40
18:59:32.371 INFO catshadow: XXX encrypted to bob
18:59:35.383 INFO catshadow: Test 2 got DeliveredEvent for message 'message 2 from alice' to bob
18:59:35.383 INFO catshadow: Test 2 waiting for message 'message 2 from alice' from alice on 500e91ae664ea9cbf928bfa1
18:59:38.249 INFO catshadow: XXX decrypting from alice
XXX dhPublic (later theirRatchetPublic) ce22c028a7bf6e611e4be2f90b5f8faf7344e3a0e4826bc6b1561d5e580ded15
XXX theirPQRatchetPublic 0ae391bb797fd54df3f842ef9412870e367348764c7ea2fc67692fedf936e7bfbd5ff835f8164c8f679588281d44083c31fcd1ffcf717d915d985f3c0d541d3b
18:59:38.965 INFO catshadow: Test 2 received message 'message 2 from alice' from alice
18:59:38.965 INFO catshadow: Test 2 Sending message 'message 3 from bob' to alice on 8732560e23771c40325591ce
XXX writing sendRatchetPublic to header: b94f90e0d55a27623c5c7ac05aac6d39ee87cc0fb91be6d62490d6e945167946
XXX writing sendPQRatchetPublicBytes to header: 4657ddda0443391063e5ffacef7048d72c56a10d7ecd42e2a7e2a354b19b17c2ce449c1196c2dea7f32799af9c60b163fa3f69b8699c67ad722ff0f05e6cc128 at offset 40
18:59:40.269 INFO catshadow: XXX encrypted to alice
18:59:41.409 INFO catshadow: Test 2 got DeliveredEvent for message 'message 3 from bob' to alice
18:59:41.409 INFO catshadow: Test 2 waiting for message 'message 3 from bob' from bob on 8732560e23771c40325591ce
18:59:50.689 INFO catshadow: XXX decrypting from bob
XXX dhPublic (later theirRatchetPublic) b94f90e0d55a27623c5c7ac05aac6d39ee87cc0fb91be6d62490d6e945167946
XXX theirPQRatchetPublic 4657ddda0443391063e5ffacef7048d72c56a10d7ecd42e2a7e2a354b19b17c2ce449c1196c2dea7f32799af9c60b163fa3f69b8699c67ad722ff0f05e6cc128
18:59:51.473 INFO catshadow: Test 2 received message 'message 3 from bob' from bob
18:59:51.473 INFO catshadow: Shutting down now.
18:59:51.479 NOTI katzenpost/client: Starting graceful shutdown.
18:59:51.480 NOTI minclient:84abfcd16367616f5e3c5327c2d17ae6f7a51e71a34dc90a8d1d767df1f2aec6@servicenode2: Starting graceful shutdown.
18:59:51.481 NOTI minclient:84abfcd16367616f5e3c5327c2d17ae6f7a51e71a34dc90a8d1d767df1f2aec6@servicenode2: Shutdown complete.
18:59:51.481 INFO catshadow: Shutting down now.
18:59:51.483 INFO catshadow: Shutting down now.
18:59:51.489 NOTI katzenpost/client: Starting graceful shutdown.
18:59:51.489 NOTI minclient:76ecb0fa56fbafd03d3ae527b76fe58510aa9300a608908d1c939aec977cf22f@servicenode2: Starting graceful shutdown.
18:59:51.490 NOTI minclient:76ecb0fa56fbafd03d3ae527b76fe58510aa9300a608908d1c939aec977cf22f@servicenode2: Shutdown complete.
18:59:51.490 INFO catshadow: Shutting down now.
--- PASS: TestUpgradeResume_2 (28.30s)
PASS
ok  	github.com/katzenpost/katzenpost/catshadow	29.350s
