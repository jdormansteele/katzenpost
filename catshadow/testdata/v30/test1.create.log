=== RUN   TestUpgradeCreate_1
=== PAUSE TestUpgradeCreate_1
=== CONT  TestUpgradeCreate_1
18:49:05.696 NOTI katzenpost/client: ðŸ˜¼ Katzenpost is still pre-alpha.  DO NOT DEPEND ON IT FOR STRONG SECURITY OR ANONYMITY. ðŸ˜¼
18:49:05.892 NOTI pki/voting/Client: Get(ctx, 1853124)
18:49:05.915 NOTI pki/voting/client/connector: sending getConsensus to auth1
18:49:08.035 NOTI pki/voting/client/connector: got response from auth1 to GetConsensus(1853124) (attempt 0, err=<nil>, res=Ok)
18:49:08.215 NOTI pki/voting/Client: OK, received fully signed consensus document.
18:49:08.401 NOTI pki/voting/Client: voting/Client: Get() document:
&{Epoch: 1853124 GenesisEpoch: 1853124
SendRatePerMinute: 100 Mu: 0.005 MuMaxDelay: 1000 LambdaP:0.001 LambdaPMaxDelay:1000 LambdaL:0.0005 LambdaLMaxDelay:1000 LambdaD:0.0005 LambdaDMaxDelay:3000 LambdaM: 0.0005 LambdaMMaxDelay: 100
SharedRandomValue: 88FlI4S62X5gdWHeyQjsxD0DNaqMirApPBsAMRL3PqA= PriorSharedRandom: [88FlI4S62X5gdWHeyQjsxD0DNaqMirApPBsAMRL3PqA=, 88FlI4S62X5gdWHeyQjsxD0DNaqMirApPBsAMRL3PqA=]
Topology:
  [0]{[{mix1 366ca35e69aa593ed11f6fddc54dc7029f71264fdcd6b37a7dafd459faed37c9 map[tcp4:[127.0.0.1:30006]]}]}
  [1]{[{mix2 a6398fa48ac8c2a0ff80c5a1e378420f13d08c567aa099d26bc0b53c3569a6f5 map[tcp4:[127.0.0.1:30007]]}]}
  [2]{[{mix3 27e66d0f3bbf8286a84563ed7a323f300b1369dffd935cbd4bac2a60475b40d9 map[tcp4:[127.0.0.1:30008]]}]}
}
Providers:[]{[{servicenode2 a1abab430caa5888f5731ef0d929585f3b16601609bb6de27fd6b62826285088 map[tcp:[localhost:30005] tcp4:[127.0.0.1:30005]]map[echo:map[endpoint:+echo]]tofu} {servicenode1 f567a25ee23836c181880064a12847e3b8564f30cdb681edb8524154cbe33893 map[tcp:[localhost:30004] tcp4:[127.0.0.1:30004]]map[echo:map[endpoint:+echo] panda:map[endpoint:+panda] spool:map[endpoint:+spool]]oob}]}}}
18:49:08.402 NOTI minclient:cf052e005e748e8a8ed89bc5d08f9fa4bcdba266d7bd898701b3d820d1566aab@servicenode2: Katzenpost is still pre-alpha.  DO NOT DEPEND ON IT FOR STRONG SECURITY OR ANONYMITY.
18:49:08.426 INFO catshadow: Connection status change: isConnected true
18:49:08.539 ERRO catshadow: Should not sendReadInbox before the remote spool was made...
18:49:09.240 ERRO catshadow: Should not sendReadInbox before the remote spool was made...
18:49:10.247 NOTI katzenpost/client: ðŸ˜¼ Katzenpost is still pre-alpha.  DO NOT DEPEND ON IT FOR STRONG SECURITY OR ANONYMITY. ðŸ˜¼
18:49:10.329 NOTI pki/voting/Client: Get(ctx, 1853124)
18:49:10.347 NOTI pki/voting/client/connector: sending getConsensus to auth2
18:49:10.666 NOTI pki/voting/client/connector: got response from auth2 to GetConsensus(1853124) (attempt 0, err=<nil>, res=Ok)
18:49:10.772 NOTI pki/voting/Client: OK, received fully signed consensus document.
18:49:10.932 NOTI pki/voting/Client: voting/Client: Get() document:
&{Epoch: 1853124 GenesisEpoch: 1853124
SendRatePerMinute: 100 Mu: 0.005 MuMaxDelay: 1000 LambdaP:0.001 LambdaPMaxDelay:1000 LambdaL:0.0005 LambdaLMaxDelay:1000 LambdaD:0.0005 LambdaDMaxDelay:3000 LambdaM: 0.0005 LambdaMMaxDelay: 100
SharedRandomValue: 88FlI4S62X5gdWHeyQjsxD0DNaqMirApPBsAMRL3PqA= PriorSharedRandom: [88FlI4S62X5gdWHeyQjsxD0DNaqMirApPBsAMRL3PqA=, 88FlI4S62X5gdWHeyQjsxD0DNaqMirApPBsAMRL3PqA=]
Topology:
  [0]{[{mix1 366ca35e69aa593ed11f6fddc54dc7029f71264fdcd6b37a7dafd459faed37c9 map[tcp4:[127.0.0.1:30006]]}]}
  [1]{[{mix2 a6398fa48ac8c2a0ff80c5a1e378420f13d08c567aa099d26bc0b53c3569a6f5 map[tcp4:[127.0.0.1:30007]]}]}
  [2]{[{mix3 27e66d0f3bbf8286a84563ed7a323f300b1369dffd935cbd4bac2a60475b40d9 map[tcp4:[127.0.0.1:30008]]}]}
}
Providers:[]{[{servicenode2 a1abab430caa5888f5731ef0d929585f3b16601609bb6de27fd6b62826285088 map[tcp:[localhost:30005] tcp4:[127.0.0.1:30005]]map[echo:map[endpoint:+echo]]tofu} {servicenode1 f567a25ee23836c181880064a12847e3b8564f30cdb681edb8524154cbe33893 map[tcp:[localhost:30004] tcp4:[127.0.0.1:30004]]map[echo:map[endpoint:+echo] panda:map[endpoint:+panda] spool:map[endpoint:+spool]]oob}]}}}
18:49:10.933 NOTI minclient:cf16c56a7824d33a4a7a1ab0368554e88cce22e7d64c9fc99a3db1386c8ab064@servicenode2: Katzenpost is still pre-alpha.  DO NOT DEPEND ON IT FOR STRONG SECURITY OR ANONYMITY.
18:49:10.964 INFO catshadow: Connection status change: isConnected true
18:49:18.365 INFO catshadow: New PANDA key exchange in progress.
18:49:18.368 INFO catshadow: New PANDA key exchange in progress.
18:49:18.541 INFO PANDA_keyexchange_bob: password derivation complete.
18:49:18.563 INFO PANDA_keyexchange_alice: password derivation complete.
18:49:21.225 INFO PANDA_keyexchange_bob: first message exchange complete
18:49:23.534 INFO PANDA_keyexchange_alice: first message exchange complete
18:49:27.078 INFO catshadow: Double ratchet key exchange completed!
18:49:30.440 INFO catshadow: Double ratchet key exchange completed!
18:49:30.441 INFO catshadow: Shutting down now.
18:49:30.445 NOTI katzenpost/client: Starting graceful shutdown.
18:49:30.446 NOTI minclient:cf052e005e748e8a8ed89bc5d08f9fa4bcdba266d7bd898701b3d820d1566aab@servicenode2: Starting graceful shutdown.
18:49:30.446 NOTI minclient:cf052e005e748e8a8ed89bc5d08f9fa4bcdba266d7bd898701b3d820d1566aab@servicenode2: Shutdown complete.
    client_docker_upgrade_test.go:109: Calling alice.Wait()
18:49:30.447 INFO catshadow: Shutting down now.
18:49:30.447 INFO catshadow: Test 1 Sending message 'message 1 from bob' to alice on 3e98f623fdc1fe27e66f5f97
XXX writing sendRatchetPublic to header: d3478b68ed2cc5ad27f0f5240ec2c4ccd210c92150c374771208185cd4554f7b
XXX writing sendPQRatchetPublicBytes to header: 6fe6ee99e96171ab07042d3f6c02a65d7650cd930fbcca2156382c921c4203a548f16fe7325245098fe79c689149f0e43a1bf526be44c4bb102d8f48ffdb1c24 at offset 40
18:49:31.546 INFO catshadow: XXX encrypted to alice
18:49:37.222 INFO catshadow: Test 1 got DeliveredEvent for message 'message 1 from bob' to alice
18:49:37.222 INFO catshadow: Shutting down now.
18:49:37.225 NOTI katzenpost/client: Starting graceful shutdown.
18:49:37.258 NOTI minclient:cf16c56a7824d33a4a7a1ab0368554e88cce22e7d64c9fc99a3db1386c8ab064@servicenode2: Starting graceful shutdown.
18:49:37.258 NOTI minclient:cf16c56a7824d33a4a7a1ab0368554e88cce22e7d64c9fc99a3db1386c8ab064@servicenode2: Shutdown complete.
    client_docker_upgrade_test.go:115: Calling bob.Wait()
18:49:37.259 INFO catshadow: Shutting down now.
--- PASS: TestUpgradeCreate_1 (31.91s)
PASS
ok  	github.com/katzenpost/katzenpost/catshadow	32.977s
