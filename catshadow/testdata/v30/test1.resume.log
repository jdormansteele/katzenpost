Mon Jun 17 08:56:01 PM CEST 2024
starting new test
=================
=== RUN   TestUpgradeResume_1
=== PAUSE TestUpgradeResume_1
=== CONT  TestUpgradeResume_1
18:57:27.027 NOTI katzenpost/client: ðŸ˜¼ Katzenpost is still pre-alpha.  DO NOT DEPEND ON IT FOR STRONG SECURITY OR ANONYMITY. ðŸ˜¼
18:57:27.146 NOTI pki/voting/Client: Get(ctx, 1853128)
18:57:27.167 NOTI pki/voting/client/connector: sending getConsensus to auth1
18:57:27.525 NOTI pki/voting/client/connector: got response from auth1 to GetConsensus(1853128) (attempt 0, err=<nil>, res=Ok)
18:57:27.656 NOTI pki/voting/Client: OK, received fully signed consensus document.
18:57:27.823 NOTI pki/voting/Client: voting/Client: Get() document:
&{Epoch: 1853128 GenesisEpoch: 1853128
SendRatePerMinute: 100 Mu: 0.005 MuMaxDelay: 1000 LambdaP:0.001 LambdaPMaxDelay:1000 LambdaL:0.0005 LambdaLMaxDelay:1000 LambdaD:0.0005 LambdaDMaxDelay:3000 LambdaM: 0.0005 LambdaMMaxDelay: 100
SharedRandomValue: PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0= PriorSharedRandom: [PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=, PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=]
Topology:
  [0]{[{mix1 4360877db9495add3b6da1f4cf5a1c31f87574ac1a857fb67e9d160d65ac80fe map[tcp4:[127.0.0.1:30006]]}]}
  [1]{[{mix2 ac353d491546ed96705fa0b521ab13a9ef9d74cde2daa847c7769138f61b7f4e map[tcp4:[127.0.0.1:30007]]}]}
  [2]{[{mix3 f7d45fba1b53e6609693b4356ab3905411f883329f5fb64bac6dfd894f27c834 map[tcp4:[127.0.0.1:30008]]}]}
}
Providers:[]{[{servicenode1 a5f31a4ca3e467117f3e2a6dcf06e34b1fc03e92e5fc5b58212e5acd3a86b73e map[tcp:[localhost:30004] tcp4:[127.0.0.1:30004]]map[echo:map[endpoint:+echo] panda:map[endpoint:+panda] spool:map[endpoint:+spool]]oob} {servicenode2 af7fbf8d21fca2060bb5722343fae6dda68388a8eeda11edf52ed96d44fc7776 map[tcp:[localhost:30005] tcp4:[127.0.0.1:30005]]map[echo:map[endpoint:+echo]]tofu}]}}}
18:57:27.824 NOTI minclient:dd586c2b576ed898165a392df33a256769b34b9e5c57dc1ff4ae85d7a0c67c39@servicenode2: Katzenpost is still pre-alpha.  DO NOT DEPEND ON IT FOR STRONG SECURITY OR ANONYMITY.
18:57:27.825 NOTI pki/voting/Client: Get(ctx, 1853129)
18:57:27.843 NOTI pki/voting/client/connector: sending getConsensus to auth1
18:57:28.131 NOTI pki/voting/client/connector: got response from auth1 to GetConsensus(1853129) (attempt 0, err=<nil>, res=Ok)
18:57:28.256 NOTI pki/voting/Client: OK, received fully signed consensus document.
18:57:28.422 NOTI pki/voting/Client: voting/Client: Get() document:
&{Epoch: 1853129 GenesisEpoch: 1853128
SendRatePerMinute: 100 Mu: 0.005 MuMaxDelay: 1000 LambdaP:0.001 LambdaPMaxDelay:1000 LambdaL:0.0005 LambdaLMaxDelay:1000 LambdaD:0.0005 LambdaDMaxDelay:3000 LambdaM: 0.0005 LambdaMMaxDelay: 100
SharedRandomValue: vf1SGAv7BdUIimw/8HZxEvxjTyoWCsKTRiK5ipqvu6w= PriorSharedRandom: [PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=, PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=]
Topology:
  [0]{[{mix1 4360877db9495add3b6da1f4cf5a1c31f87574ac1a857fb67e9d160d65ac80fe map[tcp4:[127.0.0.1:30006]]}]}
  [1]{[{mix2 ac353d491546ed96705fa0b521ab13a9ef9d74cde2daa847c7769138f61b7f4e map[tcp4:[127.0.0.1:30007]]}]}
  [2]{[{mix3 f7d45fba1b53e6609693b4356ab3905411f883329f5fb64bac6dfd894f27c834 map[tcp4:[127.0.0.1:30008]]}]}
}
Providers:[]{[{servicenode1 a5f31a4ca3e467117f3e2a6dcf06e34b1fc03e92e5fc5b58212e5acd3a86b73e map[tcp:[localhost:30004] tcp4:[127.0.0.1:30004]]map[echo:map[endpoint:+echo] panda:map[endpoint:+panda] spool:map[endpoint:+spool]]oob} {servicenode2 af7fbf8d21fca2060bb5722343fae6dda68388a8eeda11edf52ed96d44fc7776 map[tcp:[localhost:30005] tcp4:[127.0.0.1:30005]]map[echo:map[endpoint:+echo]]tofu}]}}}
18:57:28.424 INFO catshadow: Test 1 Sending message 'message 2 from bob' to alice on 3e98f623fdc1fe27e66f5f97
18:57:28.424 INFO catshadow: Connection status change: isConnected true
XXX writing sendRatchetPublic to header: d3478b68ed2cc5ad27f0f5240ec2c4ccd210c92150c374771208185cd4554f7b
XXX writing sendPQRatchetPublicBytes to header: 6fe6ee99e96171ab07042d3f6c02a65d7650cd930fbcca2156382c921c4203a548f16fe7325245098fe79c689149f0e43a1bf526be44c4bb102d8f48ffdb1c24 at offset 40
18:57:29.015 INFO catshadow: XXX encrypted to alice
18:57:33.537 INFO catshadow: Test 1 got DeliveredEvent for message 'message 2 from bob' to alice
18:57:33.765 NOTI katzenpost/client: ðŸ˜¼ Katzenpost is still pre-alpha.  DO NOT DEPEND ON IT FOR STRONG SECURITY OR ANONYMITY. ðŸ˜¼
18:57:33.839 NOTI pki/voting/Client: Get(ctx, 1853128)
18:57:33.857 NOTI pki/voting/client/connector: sending getConsensus to auth1
18:57:34.151 NOTI pki/voting/client/connector: got response from auth1 to GetConsensus(1853128) (attempt 0, err=<nil>, res=Ok)
18:57:34.266 NOTI pki/voting/Client: OK, received fully signed consensus document.
18:57:34.415 NOTI pki/voting/Client: voting/Client: Get() document:
&{Epoch: 1853128 GenesisEpoch: 1853128
SendRatePerMinute: 100 Mu: 0.005 MuMaxDelay: 1000 LambdaP:0.001 LambdaPMaxDelay:1000 LambdaL:0.0005 LambdaLMaxDelay:1000 LambdaD:0.0005 LambdaDMaxDelay:3000 LambdaM: 0.0005 LambdaMMaxDelay: 100
SharedRandomValue: PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0= PriorSharedRandom: [PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=, PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=]
Topology:
  [0]{[{mix1 4360877db9495add3b6da1f4cf5a1c31f87574ac1a857fb67e9d160d65ac80fe map[tcp4:[127.0.0.1:30006]]}]}
  [1]{[{mix2 ac353d491546ed96705fa0b521ab13a9ef9d74cde2daa847c7769138f61b7f4e map[tcp4:[127.0.0.1:30007]]}]}
  [2]{[{mix3 f7d45fba1b53e6609693b4356ab3905411f883329f5fb64bac6dfd894f27c834 map[tcp4:[127.0.0.1:30008]]}]}
}
Providers:[]{[{servicenode1 a5f31a4ca3e467117f3e2a6dcf06e34b1fc03e92e5fc5b58212e5acd3a86b73e map[tcp:[localhost:30004] tcp4:[127.0.0.1:30004]]map[echo:map[endpoint:+echo] panda:map[endpoint:+panda] spool:map[endpoint:+spool]]oob} {servicenode2 af7fbf8d21fca2060bb5722343fae6dda68388a8eeda11edf52ed96d44fc7776 map[tcp:[localhost:30005] tcp4:[127.0.0.1:30005]]map[echo:map[endpoint:+echo]]tofu}]}}}
18:57:34.416 NOTI minclient:c9514295b40193df8c9b0d9be73592e9def085a66736be752591f3f6bb242242@servicenode2: Katzenpost is still pre-alpha.  DO NOT DEPEND ON IT FOR STRONG SECURITY OR ANONYMITY.
18:57:34.416 NOTI pki/voting/Client: Get(ctx, 1853129)
18:57:34.432 NOTI pki/voting/client/connector: sending getConsensus to auth2
18:57:34.691 NOTI pki/voting/client/connector: got response from auth2 to GetConsensus(1853129) (attempt 0, err=<nil>, res=Ok)
18:57:34.801 NOTI pki/voting/Client: OK, received fully signed consensus document.
18:57:34.967 NOTI pki/voting/Client: voting/Client: Get() document:
&{Epoch: 1853129 GenesisEpoch: 1853128
SendRatePerMinute: 100 Mu: 0.005 MuMaxDelay: 1000 LambdaP:0.001 LambdaPMaxDelay:1000 LambdaL:0.0005 LambdaLMaxDelay:1000 LambdaD:0.0005 LambdaDMaxDelay:3000 LambdaM: 0.0005 LambdaMMaxDelay: 100
SharedRandomValue: vf1SGAv7BdUIimw/8HZxEvxjTyoWCsKTRiK5ipqvu6w= PriorSharedRandom: [PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=, PQN7ycoz+Xos/3f6THqDhV0vjuuyw46PmtYxLkKgoO0=]
Topology:
  [0]{[{mix1 4360877db9495add3b6da1f4cf5a1c31f87574ac1a857fb67e9d160d65ac80fe map[tcp4:[127.0.0.1:30006]]}]}
  [1]{[{mix2 ac353d491546ed96705fa0b521ab13a9ef9d74cde2daa847c7769138f61b7f4e map[tcp4:[127.0.0.1:30007]]}]}
  [2]{[{mix3 f7d45fba1b53e6609693b4356ab3905411f883329f5fb64bac6dfd894f27c834 map[tcp4:[127.0.0.1:30008]]}]}
}
Providers:[]{[{servicenode1 a5f31a4ca3e467117f3e2a6dcf06e34b1fc03e92e5fc5b58212e5acd3a86b73e map[tcp:[localhost:30004] tcp4:[127.0.0.1:30004]]map[echo:map[endpoint:+echo] panda:map[endpoint:+panda] spool:map[endpoint:+spool]]oob} {servicenode2 af7fbf8d21fca2060bb5722343fae6dda68388a8eeda11edf52ed96d44fc7776 map[tcp:[localhost:30005] tcp4:[127.0.0.1:30005]]map[echo:map[endpoint:+echo]]tofu}]}}}
18:57:34.968 INFO catshadow: Connection status change: isConnected true
18:57:34.968 INFO catshadow: Test 1 waiting for message 'message 1 from bob' from bob on 3e98f623fdc1fe27e66f5f97
18:57:41.391 INFO catshadow: XXX decrypting from bob
XXX dhPublic (later theirRatchetPublic) d3478b68ed2cc5ad27f0f5240ec2c4ccd210c92150c374771208185cd4554f7b
XXX theirPQRatchetPublic 6fe6ee99e96171ab07042d3f6c02a65d7650cd930fbcca2156382c921c4203a548f16fe7325245098fe79c689149f0e43a1bf526be44c4bb102d8f48ffdb1c24
18:57:42.003 INFO catshadow: Test 1 received message 'message 1 from bob' from bob
18:57:42.003 INFO catshadow: Test 1 waiting for message 'message 2 from bob' from bob on 3e98f623fdc1fe27e66f5f97
18:57:44.939 INFO catshadow: XXX decrypting from bob
18:57:44.947 INFO catshadow: Test 1 received message 'message 2 from bob' from bob
18:57:44.947 INFO catshadow: Test 1 Sending message 'message 1 from alice' to bob on 192718c3f76b482e6746e8ab
XXX writing sendRatchetPublic to header: 77738f5d9c6ff1d0e7bef35163aa293cb1674104881a166ba3f973b9d3fae315
XXX writing sendPQRatchetPublicBytes to header: 281e6ff24d318ee7d26659aa7d97849f2079928c627a8636e21b2959559ce7cdaf65111a8d02fef098213e4c736bf2629badf3412d8738d4636626221507a75a at offset 40
18:57:46.303 INFO catshadow: XXX encrypted to bob
18:57:50.296 INFO catshadow: Test 1 got DeliveredEvent for message 'message 1 from alice' to bob
18:57:50.296 INFO catshadow: Test 1 waiting for message 'message 1 from alice' from alice on 192718c3f76b482e6746e8ab
18:57:55.867 INFO catshadow: XXX decrypting from alice
XXX dhPublic (later theirRatchetPublic) 77738f5d9c6ff1d0e7bef35163aa293cb1674104881a166ba3f973b9d3fae315
XXX theirPQRatchetPublic 281e6ff24d318ee7d26659aa7d97849f2079928c627a8636e21b2959559ce7cdaf65111a8d02fef098213e4c736bf2629badf3412d8738d4636626221507a75a
18:57:56.934 INFO catshadow: Test 1 received message 'message 1 from alice' from alice
18:57:56.934 INFO catshadow: Shutting down now.
18:57:56.942 NOTI katzenpost/client: Starting graceful shutdown.
18:57:56.942 NOTI minclient:c9514295b40193df8c9b0d9be73592e9def085a66736be752591f3f6bb242242@servicenode2: Starting graceful shutdown.
18:57:56.942 NOTI minclient:c9514295b40193df8c9b0d9be73592e9def085a66736be752591f3f6bb242242@servicenode2: Shutdown complete.
18:57:56.943 INFO catshadow: Shutting down now.
    client_docker_upgrade_test.go:156: Calling alice.Wait()
18:57:56.943 INFO catshadow: Shutting down now.
18:57:56.947 NOTI katzenpost/client: Starting graceful shutdown.
18:57:56.947 NOTI minclient:dd586c2b576ed898165a392df33a256769b34b9e5c57dc1ff4ae85d7a0c67c39@servicenode2: Starting graceful shutdown.
18:57:56.948 NOTI minclient:dd586c2b576ed898165a392df33a256769b34b9e5c57dc1ff4ae85d7a0c67c39@servicenode2: Shutdown complete.
    client_docker_upgrade_test.go:160: Calling bob.Wait()
--- PASS: TestUpgradeResume_1 (30.24s)
PASS
18:57:56.948 INFO catshadow: Shutting down now.
ok  	github.com/katzenpost/katzenpost/catshadow	31.307s
