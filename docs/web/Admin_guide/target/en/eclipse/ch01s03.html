<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>From my runbook</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Chapter&nbsp;1.&nbsp;Quickstart guide"><link rel="up" href="index.html" title="Chapter&nbsp;1.&nbsp;Quickstart guide"><link rel="prev" href="ch01s02.html" title="CLI usage for servers"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d2147e40"></a>From my runbook</h2></div></div></div><p></p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d2147e44"></a><code class="code">4. </code><code class="code">Where are the files?</code></h3></div></div></div><p><code class="code"><span class="italic"><span class="bold"><strong>root@oneeyedman:/usr/local# ls
                            -al bin/</strong></span></span></code></p><p><code class="code">total 23720</code></p><p><code class="code">drwxr-xr-x 2 root root 4096 Nov 28 23:11 .</code></p><p><code class="code">drwxr-xr-x 10 root root 4096 Aug 9 11:53 ..</code></p><p><code class="code">-rwxr-xr-x 1 root root 9802680 Dec 10 17:34
                pq-katzenpost-authority</code></p><p><code class="code">-rwxr-xr-x 1 root root 14474976 Dec 10 17:33
                pq-katzenpost-mixserver</code></p><p><code class="code"><span class="bold"><strong>root@oneeyedman:</strong></span></code><code class="code"><span class="bold"><strong>~</strong></span></code><code class="code"><span class="bold"><strong># ls -al
                        /etc/pq-katzenpost-mixserver/</strong></span></code></p><p><code class="code">total 36</code></p><p><code class="code">drwxr-xr-x 2 root root 4096 Dec 10 21:01 .</code></p><p><code class="code">drwxr-xr-x 110 root root 4096 Dec 9 06:55 ..</code></p><p><code class="code">-rw-r--r-- 1 root root 14084 Nov 29 17:00 katzenpost.toml</code></p><p><code class="code">-rw-r--r-- 1 root root 11848 Nov 29 01:29 katzenpost.toml.old</code></p><p><code class="code"><span class="bold"><strong>root@oneeyedman:~# ls -al
                        /var/lib/pq-katzenpost-mixserver/ </strong></span></code><code class="code"><span class="bold"><strong>(my personal keys in red)</strong></span></code></p><p><code class="code">total 104</code></p><p><code class="code">drwx------ 2 pq-katzenpost-mixserver pq-katzenpost-mixserver 4096 Dec 11
                    02:10 .</code></p><p><code class="code">drwxr-xr-x 47 root root 4096 Dec 5 02:05 ..</code></p><p><code class="code">-rw------- 1 pq-katzenpost-mixserver pq-katzenpost-mixserver 348 Nov 29
                    01:09 identity.private.pem</code></p><p><code class="code">-rw------- 1 pq-katzenpost-mixserver pq-katzenpost-mixserver 216 Nov 29
                    01:09 identity.public.pem</code></p><p><code class="code">-rw------- 1 pq-katzenpost-mixserver pq-katzenpost-mixserver 3381 Nov 29
                    01:09 link.private.pem</code></p><p><code class="code">-rw------- 1 pq-katzenpost-mixserver pq-katzenpost-mixserver 1734 Nov 29
                    01:09 link.public.pem</code></p><p><code class="code">-rw------- 1 pq-katzenpost-mixserver pq-katzenpost-mixserver 20480 Dec 11
                    02:10 mixkey-145374.db</code></p><p><code class="code">-rw------- 1 pq-katzenpost-mixserver pq-katzenpost-mixserver 20480 Dec 11
                    02:10 mixkey-145375.db</code></p><p><code class="code">-rw------- 1 pq-katzenpost-mixserver pq-katzenpost-mixserver 20480 Dec 11
                    02:10 mixkey-145376.db</code></p><p><code class="code">-rw------- 1 pq-katzenpost-mixserver pq-katzenpost-mixserver 20480 Dec 11
                    02:11 mixkey-145377.db</code></p><p><span class="bold"><strong>Relevant git repositories:</strong></span></p><p>git clone git@github.com:katzenpost/katzenpost.git</p><p>git clone git@github.com:katzenpost/katzen.git</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d2147e142"></a><code class="code">Service management</code></h3></div></div></div><p><code class="code"><span class="bold"><strong>systemctl start
                    pq-katzenpost-mixserver</strong></span></code></p><p><code class="code"><span class="bold"><strong>systemctl st</strong></span></code><code class="code"><span class="bold"><strong>op</strong></span></code><code class="code"><span class="bold"><strong>
                        pq-katzenpost-mixserver</strong></span></code></p><p><code class="code"><span class="bold"><strong>systemctl </strong></span></code><code class="code"><span class="bold"><strong>re</strong></span></code><code class="code"><span class="bold"><strong>start
                        pq-katzenpost-mixserver</strong></span></code></p><p><code class="code"><span class="bold"><strong>systemctl </strong></span></code><code class="code"><span class="bold"><strong>enable</strong></span></code><code class="code"><span class="bold"><strong>
                        pq-katzenpost-mixserver</strong></span></code></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d2147e180"></a><code class="code">Monitoring</code></h3></div></div></div><p><code class="code"><span class="bold"><strong>journalctl -u pq-katzenpost-mixserver -f -n
                        2000</strong></span></code></p><p><code class="code"><span class="bold"><strong>iftop -t -s 18000 &gt; log.txt
                &amp;</strong></span></code></p><p><code class="code"><span class="bold"><strong>bmon -p ens3</strong></span></code></p><p><span class="bold"><strong>Log the system stats and active process every 5
                    seconds</strong></span></p><p> dwrob@hoh:~$ top -i -b -d 5 &gt; top-watchdog.txt</p><p><span class="bold"><strong>Keep an eye on the active updating of that
                file</strong></span></p><p> dwrob@hoh:~$ watch -d ls -l </p><p> Every 2.0s: ls -al top-watchdog.txt hoh: Sun Dec 4 11:06:17 2022</p><p> -rw-r--r-- 1 dwrob dwrob 16016638 Dec 4 11:06 top-watchdog.txt</p><p><span class="bold"><strong>Watch the actual updates</strong></span></p><p> dwrob@hoh:~$ tail -f top-watchdog.txt</p><p><span class="bold"><strong>Capture net/disk/sys stats in CSV</strong></span></p><p> dwrob@hoh:~$ dstat -tndcgy -N enp40s0 --output dstat.csv</p><p><span class="bold"><strong>And in general</strong></span></p><p><code class="code">dwrob@hoh:~$ bpytop</code></p></div></div></body></html>